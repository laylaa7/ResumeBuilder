<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
    --primary: #4a6bff;
    --primary-light: #7a91ff;
    --primary-dark: #3a5bef;
    --primary-darker: #2a4bdf;
    --secondary: #64748b;
    --secondary-light: #94a3b8;
    --light: #f8fafc;
    --dark: #0f172a;
    --dark-light: #1e293b;
    --gray: #e2e8f0;
    --gray-dark: #cbd5e1;
    --success: #10b981;
    --danger: #ef4444;
    --warning: #f59e0b;
    --accent: #4a6bff;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
    background-color: #f1f5f9;
    color: var(--dark);
    min-height: 100vh;
    line-height: 1.6;
}

.app-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
}

/* Header Styles */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    margin-bottom: 2rem;
    border-bottom: 1px solid var(--gray);
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
}

.logo-icon {
    font-size: 1.75rem;
}

.controls {
    display: flex;
    gap: 1rem;
    align-items: center;
}

/* Main Layout */
.builder-container {
    display: grid;
    grid-template-columns: 400px 1fr;
    gap: 2rem;
}

/* Form Panel */
.form-panel {
    background: white;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    height: fit-content;
    position: sticky;
    top: 1rem;
}

.form-section {
    margin-bottom: 1.5rem;
}

.section-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--gray);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-title i {
    font-size: 1rem;
}

.form-group {
    margin-bottom: 1rem;
}

label {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--dark);
    margin-bottom: 0.5rem;
}

input, textarea, select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--gray);
    border-radius: 0.5rem;
    font-size: 0.875rem;
    transition: all 0.2s;
}

input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(74, 107, 255, 0.1);
}

textarea {
    min-height: 100px;
    resize: vertical;
}

/* Preview Panel */
.preview-panel {
    background: white;
    border-radius: 0.75rem;
    padding: 2rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    min-height: 90vh;
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: 0.5rem;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
}

.btn-primary {
    background-color: var(--primary);
    color: white;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-outline {
    background-color: transparent;
    border: 1px solid var(--gray);
    color: var(--dark);
}

.btn-outline:hover {
    background-color: var(--gray);
}

.btn-success {
    background-color: var(--success);
    color: white;
}

.btn-icon {
    padding: 0.5rem;
    border-radius: 50%;
}

/* Dynamic List Items */
.dynamic-list {
    margin-top: 1rem;
}

.list-item {
    background-color: #f8fafc;
    padding: 1rem;
    margin-bottom: 0.75rem;
    border-radius: 0.5rem;
    position: relative;
    border: 1px solid var(--gray);
}

.remove-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: none;
    border: none;
    color: var(--danger);
    cursor: pointer;
    font-size: 1rem;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.remove-btn:hover {
    background-color: rgba(239, 68, 68, 0.1);
}

/* Resume Preview Styles */
.resume-header {
    text-align: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--primary);
}

.resume-name {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.25rem;
}

.resume-title {
    font-size: 1.25rem;
    color: var(--secondary);
    margin-bottom: 0.75rem;
}

.resume-contact {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
    font-size: 0.875rem;
    color: var(--secondary);
}

.resume-section {
    margin-bottom: 1.5rem;
}

.section-title-resume {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 0.75rem;
    padding-bottom: 0.25rem;
    border-bottom: 1px solid var(--gray);
}

.experience-item, .education-item {
    margin-bottom: 1rem;
}

.experience-header, .education-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
}

.experience-title, .education-degree {
    font-weight: 600;
    font-size: 1.1rem;
}

.experience-company, .education-institution {
    font-weight: 500;
    color: var(--primary);
}

.experience-duration, .education-duration {
    color: var(--secondary);
    font-size: 0.875rem;
}

.experience-description {
    margin-top: 0.5rem;
    font-size: 0.9375rem;
}

.skills-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.skill-tag {
    background-color: var(--primary);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.8125rem;
}

/* Template Specific Styles */
.template-executive .resume-header {
    text-align: left;
    border-bottom: none;
}

.template-executive .resume-name {
    color: var(--dark);
}

.template-executive .section-title-resume {
    border-bottom: 2px solid var(--dark);
    color: var(--dark);
}

.template-executive .experience-company {
    color: var(--dark);
}

.template-creative .resume-header {
    background-color: var(--primary);
    padding: 1.5rem;
    border-radius: 0.5rem;
    color: white;
    margin-bottom: 2rem;
}

.template-creative .resume-name,
.template-creative .resume-title,
.template-creative .resume-contact {
    color: white;
}

.template-creative .section-title-resume {
    color: var(--primary-light);
}

.template-minimalist .resume-header {
    text-align: left;
    border-bottom: none;
    padding-bottom: 0;
}

.template-minimalist .resume-name {
    font-weight: 400;
    letter-spacing: -0.5px;
}

.template-minimalist .section-title-resume {
    font-weight: 400;
    border-bottom: none;
    color: var(--dark);
}

.template-technical .resume-header {
    text-align: left;
    border-bottom: none;
}

.template-technical .resume-name {
    font-family: 'Courier New', monospace;
}

.template-technical .section-title-resume {
    font-family: 'Courier New', monospace;
    border-bottom: 1px dashed var(--gray);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .builder-container {
        grid-template-columns: 1fr;
    }

    .form-panel {
        position: static;
    }
}

/* Loading Spinner */
.spinner {
    display: none;
    width: 24px;
    height: 24px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Template Selector */
.template-selector {
    position: relative;
}

.template-selector select {
    appearance: none;
    padding: 0.5rem 2rem 0.5rem 1rem;
    background-color: white;
    border: 1px solid var(--gray);
    border-radius: 0.5rem;
    font-size: 0.875rem;
    cursor: pointer;
}

.template-selector::after {
    content: "â–¼";
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.625rem;
    color: var(--secondary);
    pointer-events: none;
}

/* Action Buttons */
.action-buttons {
    display: flex;
    gap: 0.75rem;
    margin-top: 1.5rem;
}

/* Additional Color Palette Elements */
.bg-primary {
    background-color: var(--primary);
}

.text-primary {
    color: var(--primary);
}

.border-primary {
    border-color: var(--primary);
}

.hover\:bg-primary-dark:hover {
    background-color: var(--primary-dark);
}

.focus\:ring-primary:focus {
    box-shadow: 0 0 0 3px rgba(74, 107, 255, 0.3);
}

/* Gradient Backgrounds */
.bg-gradient-primary {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
}

/* Shadows */
.shadow-primary {
    box-shadow: 0 4px 6px -1px rgba(74, 107, 255, 0.1), 0 2px 4px -1px rgba(74, 107, 255, 0.06);
}

/* Transitions */
.transition-colors {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
}
    </style>
</head>
<body class="template-default">
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-file-alt logo-icon"></i>
                <span>ResumeCraft</span>
            </div>
            <div class="controls">
                <div class="template-selector">
                    <select id="templateSelect" onchange="changeTemplate()">
                        <option value="default">Default</option>
                        <option value="executive">Executive</option>
                        <option value="creative">Creative</option>
                        <option value="minimalist">Minimalist</option>
                        <option value="technical">Technical</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="downloadBtn" onclick="generatePDF()">
                    <span>Download PDF</span>
                    <div class="spinner" id="spinner"></div>
                </button>
            </div>
        </header>

        <div class="builder-container">
            <!-- Form Panel -->
            <div class="form-panel">
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-user"></i> Personal Details</h3>
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" placeholder="John Doe" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="jobTitle">Professional Title</label>
                        <input type="text" id="jobTitle" placeholder="Software Engineer" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="john.doe@example.com" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input type="tel" id="phone" placeholder="+1 (234) 567-8901" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" placeholder="New York, NY" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="linkedin">LinkedIn</label>
                        <input type="url" id="linkedin" placeholder="linkedin.com/in/johndoe" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label for="portfolio">Portfolio/Website</label>
                        <input type="url" id="portfolio" placeholder="johndoe.com" oninput="updatePreview()">
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-file-alt"></i> Professional Summary</h3>
                    <div class="form-group">
                        <textarea id="summary" rows="5" placeholder="Experienced professional with 5+ years in the industry..." oninput="updatePreview()"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-briefcase"></i> Work Experience</h3>
                    <div id="experienceList" class="dynamic-list"></div>
                    <button class="btn btn-outline" onclick="addExperience()">
                        <i class="fas fa-plus"></i> Add Experience
                    </button>
                </div>

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-graduation-cap"></i> Education</h3>
                    <div id="educationList" class="dynamic-list"></div>
                    <button class="btn btn-outline" onclick="addEducation()">
                        <i class="fas fa-plus"></i> Add Education
                    </button>
                </div>

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-code"></i> Skills</h3>
                    <div class="form-group">
                        <label for="skills">List your skills (comma separated)</label>
                        <input type="text" id="skills" placeholder="JavaScript, HTML, CSS, React, Node.js" oninput="updatePreview()">
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-award"></i> Certifications</h3>
                    <div id="certificationList" class="dynamic-list"></div>
                    <button class="btn btn-outline" onclick="addCertification()">
                        <i class="fas fa-plus"></i> Add Certification
                    </button>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-outline" onclick="resetForm()">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                    <button class="btn btn-primary" onclick="saveResume()">
                        <i class="fas fa-save"></i> Save
                    </button>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="preview-panel" id="resumePreview">
                <div class="resume-header">
                    <h1 class="resume-name" id="previewName">Your Name</h1>
                    <h2 class="resume-title" id="previewJobTitle">Professional Title</h2>
                    <div class="resume-contact">
                        <span id="previewEmail">email@example.com</span>
                        <span id="previewPhone">+1 (234) 567-8901</span>
                        <span id="previewLocation">New York, NY</span>
                        <span id="previewLinkedIn">linkedin.com/in/yourprofile</span>
                        <span id="previewPortfolio">yourwebsite.com</span>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title-resume">Professional Summary</h3>
                    <p id="previewSummary">Experienced professional with expertise in your field. Highlight your key achievements and career objectives here.</p>
                </div>

                <div class="resume-section">
                    <h3 class="section-title-resume">Work Experience</h3>
                    <div id="previewExperience">
                        <div class="experience-item">
                            <div class="experience-header">
                                <div>
                                    <span class="experience-title">Job Title</span> at 
                                    <span class="experience-company">Company Name</span>
                                </div>
                                <div class="experience-duration">Jan 2020 - Present</div>
                            </div>
                            <p class="experience-description">Describe your responsibilities and achievements in this role.</p>
                        </div>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title-resume">Education</h3>
                    <div id="previewEducation">
                        <div class="education-item">
                            <div class="education-header">
                                <div>
                                    <span class="education-degree">Degree Name</span> at 
                                    <span class="education-institution">University Name</span>
                                </div>
                                <div class="education-duration">2016 - 2020</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title-resume">Skills</h3>
                    <div class="skills-container" id="previewSkills">
                        <span class="skill-tag">Skill 1</span>
                        <span class="skill-tag">Skill 2</span>
                        <span class="skill-tag">Skill 3</span>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title-resume">Certifications</h3>
                    <div id="previewCertifications">
                        <div class="experience-item">
                            <div class="experience-header">
                                <div>
                                    <span class="experience-title">Certification Name</span> from 
                                    <span class="experience-company">Issuing Organization</span>
                                </div>
                                <div class="experience-duration">2022</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize jsPDF
        const { jsPDF } = window.jspdf;
        
        let experienceCount = 0;
        let educationCount = 0;
        let certificationCount = 0;
    
        // Initialize the form with one empty experience and education
        document.addEventListener('DOMContentLoaded', function() {
            addExperience();
            addEducation();
            
            // Load saved data if available
            if(localStorage.getItem('resumeData')) {
                loadResume();
            }
        });
    
        function addExperience() {
            const id = experienceCount++;
            const experienceItem = document.createElement('div');
            experienceItem.className = 'list-item';
            experienceItem.id = `experience-${id}`;
            experienceItem.innerHTML = `
                <button class="remove-btn" onclick="removeItem('experience-${id}')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="form-group">
                    <label for="expJobTitle-${id}">Job Title</label>
                    <input type="text" id="expJobTitle-${id}" placeholder="Software Engineer" oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <label for="expCompany-${id}">Company</label>
                    <input type="text" id="expCompany-${id}" placeholder="Tech Corp Inc." oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1;">
                            <label for="expStartDate-${id}">Start Date</label>
                            <input type="month" id="expStartDate-${id}" oninput="updatePreview()">
                        </div>
                        <div style="flex: 1;">
                            <label for="expEndDate-${id}">End Date</label>
                            <input type="month" id="expEndDate-${id}" placeholder="Present" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="expDescription-${id}">Description</label>
                    <textarea id="expDescription-${id}" rows="3" placeholder="Describe your responsibilities and achievements..." oninput="updatePreview()"></textarea>
                </div>
            `;
            document.getElementById('experienceList').appendChild(experienceItem);
            updatePreview();
        }
    
        function addEducation() {
            const id = educationCount++;
            const educationItem = document.createElement('div');
            educationItem.className = 'list-item';
            educationItem.id = `education-${id}`;
            educationItem.innerHTML = `
                <button class="remove-btn" onclick="removeItem('education-${id}')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="form-group">
                    <label for="eduDegree-${id}">Degree</label>
                    <input type="text" id="eduDegree-${id}" placeholder="Bachelor of Science" oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <label for="eduUniversity-${id}">Institution</label>
                    <input type="text" id="eduUniversity-${id}" placeholder="University Name" oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1;">
                            <label for="eduStartDate-${id}">Start Date</label>
                            <input type="month" id="eduStartDate-${id}" oninput="updatePreview()">
                        </div>
                        <div style="flex: 1;">
                            <label for="eduEndDate-${id}">End Date</label>
                            <input type="month" id="eduEndDate-${id}" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="eduGPA-${id}">GPA (Optional)</label>
                    <input type="text" id="eduGPA-${id}" placeholder="3.8/4.0" oninput="updatePreview()">
                </div>
            `;
            document.getElementById('educationList').appendChild(educationItem);
            updatePreview();
        }
    
        function addCertification() {
            const id = certificationCount++;
            const certificationItem = document.createElement('div');
            certificationItem.className = 'list-item';
            certificationItem.id = `certification-${id}`;
            certificationItem.innerHTML = `
                <button class="remove-btn" onclick="removeItem('certification-${id}')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="form-group">
                    <label for="certName-${id}">Certification Name</label>
                    <input type="text" id="certName-${id}" placeholder="AWS Certified" oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <label for="certIssuer-${id}">Issuing Organization</label>
                    <input type="text" id="certIssuer-${id}" placeholder="Amazon Web Services" oninput="updatePreview()">
                </div>
                <div class="form-group">
                    <label for="certDate-${id}">Date Earned</label>
                    <input type="month" id="certDate-${id}" oninput="updatePreview()">
                </div>
            `;
            document.getElementById('certificationList').appendChild(certificationItem);
            updatePreview();
        }
    
        function removeItem(id) {
            const element = document.getElementById(id);
            if (element) {
                element.remove();
                updatePreview();
            }
        }
    
        function updatePreview() {
            // Update personal details
            document.getElementById('previewName').textContent = document.getElementById('fullName').value || 'Your Name';
            document.getElementById('previewJobTitle').textContent = document.getElementById('jobTitle').value || 'Professional Title';
            document.getElementById('previewEmail').textContent = document.getElementById('email').value || 'email@example.com';
            document.getElementById('previewPhone').textContent = document.getElementById('phone').value || '+1 (234) 567-8901';
            document.getElementById('previewLocation').textContent = document.getElementById('location').value || 'New York, NY';
            
            const linkedin = document.getElementById('linkedin').value;
            document.getElementById('previewLinkedIn').textContent = linkedin ? (linkedin.startsWith('http') ? linkedin : `linkedin.com/in/${linkedin}`) : 'linkedin.com/in/yourprofile';
            
            const portfolio = document.getElementById('portfolio').value;
            document.getElementById('previewPortfolio').textContent = portfolio || 'yourwebsite.com';
            
            // Update summary
            document.getElementById('previewSummary').textContent = document.getElementById('summary').value || 'Experienced professional with expertise in your field. Highlight your key achievements and career objectives here.';
            
            // Update experience
            const previewExperience = document.getElementById('previewExperience');
            previewExperience.innerHTML = '';
            
            let hasExperience = false;
            for (let i = 0; i < experienceCount; i++) {
                const expElement = document.getElementById(`experience-${i}`);
                if (!expElement) continue;
                
                const jobTitle = document.getElementById(`expJobTitle-${i}`).value;
                const company = document.getElementById(`expCompany-${i}`).value;
                const startDate = document.getElementById(`expStartDate-${i}`).value;
                const endDate = document.getElementById(`expEndDate-${i}`).value;
                const description = document.getElementById(`expDescription-${i}`).value;
                
                if (jobTitle || company) {
                    hasExperience = true;
                    const experienceItem = document.createElement('div');
                    experienceItem.className = 'experience-item';
                    
                    const dateText = formatDateRange(startDate, endDate);
                    
                    experienceItem.innerHTML = `
                        <div class="experience-header">
                            <div>
                                ${jobTitle ? `<span class="experience-title">${jobTitle}</span>` : ''}
                                ${company ? ` at <span class="experience-company">${company}</span>` : ''}
                            </div>
                            ${dateText ? `<div class="experience-duration">${dateText}</div>` : ''}
                        </div>
                        ${description ? `<p class="experience-description">${description}</p>` : ''}
                    `;
                    
                    previewExperience.appendChild(experienceItem);
                }
            }
            
            if (!hasExperience) {
                previewExperience.innerHTML = `
                    <div class="experience-item">
                        <div class="experience-header">
                            <div>
                                <span class="experience-title">Job Title</span> at 
                                <span class="experience-company">Company Name</span>
                            </div>
                            <div class="experience-duration">Jan 2020 - Present</div>
                        </div>
                        <p class="experience-description">Describe your responsibilities and achievements in this role.</p>
                    </div>
                `;
            }
            
            // Update education
            const previewEducation = document.getElementById('previewEducation');
            previewEducation.innerHTML = '';
            
            let hasEducation = false;
            for (let i = 0; i < educationCount; i++) {
                const eduElement = document.getElementById(`education-${i}`);
                if (!eduElement) continue;
                
                const degree = document.getElementById(`eduDegree-${i}`).value;
                const university = document.getElementById(`eduUniversity-${i}`).value;
                const startDate = document.getElementById(`eduStartDate-${i}`).value;
                const endDate = document.getElementById(`eduEndDate-${i}`).value;
                const gpa = document.getElementById(`eduGPA-${i}`).value;
                
                if (degree || university) {
                    hasEducation = true;
                    const educationItem = document.createElement('div');
                    educationItem.className = 'education-item';
                    
                    const dateText = formatDateRange(startDate, endDate);
                    
                    educationItem.innerHTML = `
                        <div class="education-header">
                            <div>
                                ${degree ? `<span class="education-degree">${degree}</span>` : ''}
                                ${university ? ` at <span class="education-institution">${university}</span>` : ''}
                            </div>
                            ${dateText ? `<div class="education-duration">${dateText}</div>` : ''}
                        </div>
                        ${gpa ? `<p>GPA: ${gpa}</p>` : ''}
                    `;
                    
                    previewEducation.appendChild(educationItem);
                }
            }
            
            if (!hasEducation) {
                previewEducation.innerHTML = `
                    <div class="education-item">
                        <div class="education-header">
                            <div>
                                <span class="education-degree">Degree Name</span> at 
                                <span class="education-institution">University Name</span>
                            </div>
                            <div class="education-duration">2016 - 2020</div>
                        </div>
                    </div>
                `;
            }
            
            // Update skills
            const previewSkills = document.getElementById('previewSkills');
            const skillsInput = document.getElementById('skills').value;
            
            if (skillsInput) {
                previewSkills.innerHTML = '';
                const skills = skillsInput.split(',').map(skill => skill.trim()).filter(skill => skill);
                
                if (skills.length > 0) {
                    skills.forEach(skill => {
                        const skillTag = document.createElement('span');
                        skillTag.className = 'skill-tag';
                        skillTag.textContent = skill;
                        previewSkills.appendChild(skillTag);
                    });
                } else {
                    previewSkills.innerHTML = '<span class="skill-tag">Skill 1</span><span class="skill-tag">Skill 2</span><span class="skill-tag">Skill 3</span>';
                }
            } else {
                previewSkills.innerHTML = '<span class="skill-tag">Skill 1</span><span class="skill-tag">Skill 2</span><span class="skill-tag">Skill 3</span>';
            }
            
            // Update certifications
            const previewCertifications = document.getElementById('previewCertifications');
            previewCertifications.innerHTML = '';
            
            let hasCertifications = false;
            for (let i = 0; i < certificationCount; i++) {
                const certElement = document.getElementById(`certification-${i}`);
                if (!certElement) continue;
                
                const certName = document.getElementById(`certName-${i}`).value;
                const issuer = document.getElementById(`certIssuer-${i}`).value;
                const date = document.getElementById(`certDate-${i}`).value;
                
                if (certName || issuer) {
                    hasCertifications = true;
                    const certItem = document.createElement('div');
                    certItem.className = 'experience-item';
                    
                    let dateText = '';
                    if (date) {
                        const dateObj = new Date(date);
                        dateText = dateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
                    }
                    
                    certItem.innerHTML = `
                        <div class="experience-header">
                            <div>
                                ${certName ? `<span class="experience-title">${certName}</span>` : ''}
                                ${issuer ? ` from <span class="experience-company">${issuer}</span>` : ''}
                            </div>
                            ${dateText ? `<div class="experience-duration">${dateText}</div>` : ''}
                        </div>
                    `;
                    
                    previewCertifications.appendChild(certItem);
                }
            }
            
            if (!hasCertifications) {
                previewCertifications.innerHTML = `
                    <div class="experience-item">
                        <div class="experience-header">
                            <div>
                                <span class="experience-title">Certification Name</span> from 
                                <span class="experience-company">Issuing Organization</span>
                            </div>
                            <div class="experience-duration">2022</div>
                        </div>
                    </div>
                `;
            }
        }
    
        function formatDateRange(startDate, endDate) {
            let result = '';
            
            if (startDate) {
                const startDateObj = new Date(startDate);
                result += startDateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
            }
            
            if (endDate) {
                const endDateObj = new Date(endDate);
                result += ' - ' + endDateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
            } else if (startDate) {
                result += ' - Present';
            }
            
            return result.trim();
        }
    
        function resetForm() {
            if (!confirm('Are you sure you want to reset the form? All your data will be lost.')) {
                return;
            }
            
            // Clear form inputs
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.value = '';
            });
            
            // Clear dynamic lists
            document.getElementById('experienceList').innerHTML = '';
            document.getElementById('educationList').innerHTML = '';
            document.getElementById('certificationList').innerHTML = '';
            
            // Reset counters
            experienceCount = 0;
            educationCount = 0;
            certificationCount = 0;
            
            // Add default fields
            addExperience();
            addEducation();
            
            // Update preview
            updatePreview();
            
            // Clear saved data
            localStorage.removeItem('resumeData');
        }
    
        function saveResume() {
            const resumeData = {
                personal: {
                    fullName: document.getElementById('fullName').value,
                    jobTitle: document.getElementById('jobTitle').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    location: document.getElementById('location').value,
                    linkedin: document.getElementById('linkedin').value,
                    portfolio: document.getElementById('portfolio').value
                },
                summary: document.getElementById('summary').value,
                experiences: [],
                educations: [],
                skills: document.getElementById('skills').value,
                certifications: []
            };
            
            // Save experiences
            for (let i = 0; i < experienceCount; i++) {
                const expElement = document.getElementById(`experience-${i}`);
                if (!expElement) continue;
                
                resumeData.experiences.push({
                    jobTitle: document.getElementById(`expJobTitle-${i}`).value,
                    company: document.getElementById(`expCompany-${i}`).value,
                    startDate: document.getElementById(`expStartDate-${i}`).value,
                    endDate: document.getElementById(`expEndDate-${i}`).value,
                    description: document.getElementById(`expDescription-${i}`).value
                });
            }
            
            // Save educations
            for (let i = 0; i < educationCount; i++) {
                const eduElement = document.getElementById(`education-${i}`);
                if (!eduElement) continue;
                
                resumeData.educations.push({
                    degree: document.getElementById(`eduDegree-${i}`).value,
                    university: document.getElementById(`eduUniversity-${i}`).value,
                    startDate: document.getElementById(`eduStartDate-${i}`).value,
                    endDate: document.getElementById(`eduEndDate-${i}`).value,
                    gpa: document.getElementById(`eduGPA-${i}`).value
                });
            }
            
            // Save certifications
            for (let i = 0; i < certificationCount; i++) {
                const certElement = document.getElementById(`certification-${i}`);
                if (!certElement) continue;
                
                resumeData.certifications.push({
                    name: document.getElementById(`certName-${i}`).value,
                    issuer: document.getElementById(`certIssuer-${i}`).value,
                    date: document.getElementById(`certDate-${i}`).value
                });
            }
            
            localStorage.setItem('resumeData', JSON.stringify(resumeData));
            alert('Resume saved successfully!');
        }
    
        function loadResume() {
            const resumeData = JSON.parse(localStorage.getItem('resumeData'));
            if (!resumeData) return;
            
            // Load personal details
            document.getElementById('fullName').value = resumeData.personal.fullName || '';
            document.getElementById('jobTitle').value = resumeData.personal.jobTitle || '';
            document.getElementById('email').value = resumeData.personal.email || '';
            document.getElementById('phone').value = resumeData.personal.phone || '';
            document.getElementById('location').value = resumeData.personal.location || '';
            document.getElementById('linkedin').value = resumeData.personal.linkedin || '';
            document.getElementById('portfolio').value = resumeData.personal.portfolio || '';
            
            // Load summary
            document.getElementById('summary').value = resumeData.summary || '';
            
            // Clear existing dynamic fields
            document.getElementById('experienceList').innerHTML = '';
            document.getElementById('educationList').innerHTML = '';
            document.getElementById('certificationList').innerHTML = '';
            
            // Reset counters
            experienceCount = 0;
            educationCount = 0;
            certificationCount = 0;
            
            // Load experiences
            if (resumeData.experiences && resumeData.experiences.length > 0) {
                resumeData.experiences.forEach(exp => {
                    addExperience();
                    const id = experienceCount - 1;
                    document.getElementById(`expJobTitle-${id}`).value = exp.jobTitle || '';
                    document.getElementById(`expCompany-${id}`).value = exp.company || '';
                    document.getElementById(`expStartDate-${id}`).value = exp.startDate || '';
                    document.getElementById(`expEndDate-${id}`).value = exp.endDate || '';
                    document.getElementById(`expDescription-${id}`).value = exp.description || '';
                });
            } else {
                addExperience(); // Add at least one empty experience
            }
            
            // Load educations
            if (resumeData.educations && resumeData.educations.length > 0) {
                resumeData.educations.forEach(edu => {
                    addEducation();
                    const id = educationCount - 1;
                    document.getElementById(`eduDegree-${id}`).value = edu.degree || '';
                    document.getElementById(`eduUniversity-${id}`).value = edu.university || '';
                    document.getElementById(`eduStartDate-${id}`).value = edu.startDate || '';
                    document.getElementById(`eduEndDate-${id}`).value = edu.endDate || '';
                    document.getElementById(`eduGPA-${id}`).value = edu.gpa || '';
                });
            } else {
                addEducation(); // Add at least one empty education
            }
            
            // Load certifications
            if (resumeData.certifications && resumeData.certifications.length > 0) {
                resumeData.certifications.forEach(cert => {
                    addCertification();
                    const id = certificationCount - 1;
                    document.getElementById(`certName-${id}`).value = cert.name || '';
                    document.getElementById(`certIssuer-${id}`).value = cert.issuer || '';
                    document.getElementById(`certDate-${id}`).value = cert.date || '';
                });
            }
            
            // Load skills
            document.getElementById('skills').value = resumeData.skills || '';
            
            updatePreview();
        }
    
        function generatePDF() {
            const downloadBtn = document.getElementById('downloadBtn');
            const spinner = document.getElementById('spinner');
            
            // Show loading spinner
            downloadBtn.disabled = true;
            spinner.style.display = 'block';
            downloadBtn.querySelector('span').textContent = 'Generating...';
            
            // Get the resume preview element
            const element = document.getElementById('resumePreview');
            const name = document.getElementById('fullName').value || 'resume';
            
            // Use html2canvas to capture the resume as an image
            html2canvas(element, {
                scale: 2, // Higher quality
                logging: false,
                useCORS: true,
                allowTaint: true,
                scrollX: 0,
                scrollY: 0,
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight
            }).then(canvas => {
                // Create PDF
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 210; // A4 width in mm
                const pageHeight = 295; // A4 height in mm
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;
                
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                // Add new pages if the content is longer than one page
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // Download the PDF
                pdf.save(`${name}_resume.pdf`);
                
                // Reset button state
                downloadBtn.disabled = false;
                spinner.style.display = 'none';
                downloadBtn.querySelector('span').textContent = 'Download PDF';
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
                
                // Reset button state
                downloadBtn.disabled = false;
                spinner.style.display = 'none';
                downloadBtn.querySelector('span').textContent = 'Download PDF';
            });
        }
        
        function changeTemplate() {
            const templateSelect = document.getElementById('templateSelect');
            const selectedTemplate = templateSelect.value;
            
            // Remove all template classes
            document.body.classList.remove(
                'template-default',
                'template-executive',
                'template-creative',
                'template-minimalist',
                'template-technical'
            );
            
            // Add the selected template class
            document.body.classList.add(`template-${selectedTemplate}`);
            
            // Save template preference
            if (localStorage.getItem('resumeData')) {
                const resumeData = JSON.parse(localStorage.getItem('resumeData'));
                resumeData.template = selectedTemplate;
                localStorage.setItem('resumeData', JSON.stringify(resumeData));
            }
        }
        
    </script>
</body>
</html>